webpackJsonp([14],{"1MHT":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s={name:"modelManage",data:function(){return{menuTree:[{id:"1",text:"功能菜单",type:"node",opend:!0,children:[{id:"2",type:"node",text:"监控首页",opend:!0,children:[{id:"7",type:"children",text:"查询",onLine:!1},{id:"9",type:"children",text:"修改",onLine:!0},{id:"10",type:"children",text:"增加",onLine:!0},{id:"11",type:"children",text:"删除",onLine:!0}]}]}],defaultProps:{children:"child",label:"name"}}},created:function(){},activated:function(){this.getTree()},mounted:function(){},methods:{getTree:function(){var e=this,t=this;n.e(25).then(n.bind(null,"sp+l")).then(function(n){(i=new n.default.ParentFn).error=e.$t("error"),i.success=e.$t("success"),i.button=e.$t("button"),i.message=e.$t("message"),i.ajax("api/services/app/SmModuleOperation/QueryAll","",t,function(e){if(e.success&&e.result.items.length>0){var n=e.result.items;t.menuTree=n,t.$nextTick(function(){t.$refs.tree.setCurrentKey(n[0].id);var e=t.getOperationId(n,[]);for(var i in e)t.$refs.tree.setChecked(e[i],!0)})}})})},addOperation:function(){var e=this,t=this.$refs.tree.getCheckedNodes(!1,!0),n=this.$refs.tree.getHalfCheckedNodes(),s={inputs:[]},a=this.getModelOperationId(t,t),r=this.getModelOperationId(n,t);for(var o in console.log(a,r),r)a.push(r[o]);s.inputs=a,i.ajax("api/services/app/SmModuleOperation/CreateMore",s,e,function(t){t.success&&e.$message({type:"success",message:i.success.add})})},getModelOperationId:function(e,t){var n=[];for(var i in e)"2"==e[i].type&&e[i].child&&e[i].child.length>0&&n.push({moduleId:e[i].id,operationId:this.getArrayId(e[i].child,t)});return n},getArrayId:function(e,t){var n=[];for(var i in e)for(var s in t)"3"==e[i].type&&e[i].code==t[s].code&&n.push(e[i].id);return n},getOperationId:function(e,t){for(var n in e)"3"==e[n].type&&e[n].state&&t.push(e[n].code),e[n].child&&e[n].child.length>0&&this.getOperationId(e[n].child,t);return t},changeChecked:function(){},handleNodeClick:function(){}},store:n("olkN").a,watch:{}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("h5",{staticClass:"current title-color"},[e._v(e._s(e.$t("menuManage.curMenuTitle")))]),e._v(" "),n("div",{staticClass:"tree-box"},[n("el-aside",{staticStyle:{flex:"1"},attrs:{width:"100%"}},[n("el-tree",{ref:"tree",staticClass:"float-children border-blue",attrs:{"expand-on-click-node":!1,"empty-text":"",data:e.menuTree,"show-checkbox":"","node-key":"code","empty-text":"","highlight-current":"","default-expand-all":"",props:e.defaultProps},on:{check:e.changeChecked,"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,s=t.data;return n("span",{staticClass:"custom-tree-node",class:s.child&&0==s.child.length?"float-children":""},[s.child&&0!=s.child.length?e._e():n("span",{staticClass:"icon iconfont",staticStyle:{color:"#00a8d4","font-size":"14px"}},[e._v("")]),e._v(" "),s.child&&0!=s.child.length?n("span",{staticClass:"icon iconfont",staticStyle:{color:"#00a8d4","font-size":"12px"}},[e._v("")]):e._e(),e._v(" "),"node"!=s.type||s.opend?e._e():n("span",{staticClass:"icon iconfont",staticStyle:{color:"#00a8d4","font-size":"14px"}},[e._v("")]),e._v(" "),n("span",[e._v(e._s(i.label))])])}}])})],1),e._v(" "),n("div",{staticClass:"submit-bar row-center"},[n("el-button",{staticClass:"button",attrs:{type:"primary",size:"small"},on:{click:e.addOperation}},[e._v(e._s(e.$t("button.submit")))]),e._v(" "),n("el-button",{staticClass:"button",attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("button.prve")))])],1)],1)])},staticRenderFns:[]};var r=n("VU/8")(s,a,!1,function(e){n("8LcN")},"data-v-43669b43",null);t.default=r.exports},"8LcN":function(e,t){}});
//# sourceMappingURL=14.ea8dca11c70f5aedb690.js.map